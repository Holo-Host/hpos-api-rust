use rocket::{get, State};
use crate::{hpos::WsMutex, types::HappAndHost};

pub mod host;
pub mod apps;

#[get("/")]
pub async fn index(wsm: &State<WsMutex>) -> String {
    let mut ws = wsm.lock().await;

    // Construct sample HappAndHost just to retrieve holoport_id
    let sample = HappAndHost::init(
        "uhCkklkJVx4u17eCaaKg_phRJsHOj9u57v_4cHQR-Bd9tb-vePRyC",
        &mut ws,
    )
    .await
    .unwrap();

    format!("ðŸ¤– I'm your holoport {}", sample.holoport_id)
}
